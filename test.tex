% !TEX option = --shell-escape
\documentclass{ctexart}

\usepackage[dvipsnames]{xcolor}
\usepackage{pgfornamenthan}
\usetikzlibrary{chains}
\usetikzlibrary{calc}
% \usetikzlibrary{positioning}
\usetikzlibrary{decorations.text}
\usepackage{tikzrput}

\usepackage{cncolours}

\usepackage{fullpage}
\usepackage{tcolorbox}
\tcbuselibrary{minted}
\setminted{breaksymbolleft={},breakindent=\ccwd}


\usepackage{fancyhdr}
\fancyhf{}
\renewcommand{\headrule}{}

\fancyhead[L]{%
\tikzset{every node/.append style={inner sep=0pt,鸭卵青}}
\begin{tikzpicture}[overlay,remember picture]
\node[anchor=north west,shift={(14.5pt,-14.5pt)}] at (current page.north west)
  (nw) {\pgfornamenthan[scale=0.2]{25}};
\node[anchor=north east,shift={(-14.5pt,-14.5pt)}] at (current page.north east)
  (ne) {\pgfornamenthan[scale=0.2,symmetry=v]{25}};
\node[anchor=south west,shift={(14.5pt,14.5pt)}] at (current page.south west)
  (sw) {\pgfornamenthan[scale=0.2,symmetry=h]{25}};
\node[anchor=south east,shift={(-14.5pt,14.5pt)}] at (current page.south east)
  (se) {\pgfornamenthan[scale=0.2,symmetry=c]{25}};
%
\begin{scope}[start chain,node distance=0pt]
\node[anchor=north west,on chain] at (nw.north east) {\pgfornamenthan[scale=0.2]{47}};
\foreach \i in {1,...,15} {
  \node[on chain]{\pgfornamenthan[scale=0.2]{47}};
}
\end{scope}
%
\begin{scope}[start chain,node distance=0pt]
\node[anchor=south west,on chain] at (sw.south east) {\pgfornamenthan[scale=0.2]{47}};
\foreach \i in {1,...,6} \node[on chain]{\pgfornamenthan[scale=0.2]{47}};
\end{scope}
%
\begin{scope}[start chain=going left,node distance=0pt]
\node[anchor=south east,on chain] at (se.south west) {\pgfornamenthan[scale=0.2]{47}};
\foreach \i in {1,...,6} \node[on chain]{\pgfornamenthan[scale=0.2]{47}};
\end{scope}
%
% 垂直的话 chains 比较不好控制，我懒得折腾了，直接用 \foreach。
% 自己算一下， (47) 长度 155. 那么 scale = 0.2 的话……
\foreach \i in {0,...,21}
  \node[anchor=south west,rotate=-90,shift={($\i*(31bp,0)$)}] at (nw.south west)
    {\pgfornamenthan[scale=0.2]{47}};
%
\foreach \i in {0,...,21}
  \node[anchor=south east,rotate=90,shift={($\i*(-31bp,0)$)}] at (ne.south east)
    {\pgfornamenthan[scale=0.2]{47}};
%
%% 严格来说应该放在 \fancyfoot 吧，算了一样啦
\node[yshift=32pt,铜绿] at (current page.south) {\pgfornamenthan[scale=0.14]{51}};
\node[yshift=32pt,text=black] at (current page.south) {\thepage};
%
\end{tikzpicture}
}

\pagestyle{fancy}
\fancypagestyle{plain}{\pagestyle{fancy}}

\title{汉风图纹 pgfornament-han}
\author{林莲枝、张晨南}

\begin{document}

\maketitle

\begin{abstract}
利用 pgfornament 宏包可以在 \LaTeX{} 文件里便捷地画出十分典雅漂亮的、欧式风格的花纹。pgfornament-han 宏包的用意，正是为了尝试用 pgfornament 的已有机制，提供一些汉风的传统图纹。所有图纹均由\emph{张晨南}以 CAD 程式设计、以 TikZ 画图，再由\emph{林莲枝}转为适合 pgfornament 机制使用的宏包代码。
\end{abstract}

\emph{（这不是正式帮助文档，只是暂时性的测试文档，内容极大可能会变动。）}

\section{基本用法}

\texttt{n} 为图纹编号的话，最简单的用法是 \mintinline{latex}{\pgfornamenthan[color=red,width=1.5cm]{n}}。也可以用 \texttt{height} 或者 \texttt{scale} 设定大小。注意图纹比例是不变的，因此只有最后给出的选项有效。

TikZ 选项的应用：
\begin{minted}{latex}
\tikzset{pgfornamentstyle/.append style={draw=black,fill=red,line width=1}}
\pgfornamenthan[scale=2]{n}
\end{minted}

以下是一些范例。

\bigskip

\begin{tcblisting}{title={文本中的使用},listing side text,righthand width=5.5cm}
先来一个 \pgfornamenthan[color=blue,scale=0.2]{56}
寿字纹。原本的 \pgfornament[scale=0.3]{56} 依然可用。
\end{tcblisting}

\begin{tcblisting}{title={TikZ选项的应用},listing side text,righthand width=3cm}
\begin{tikzpicture}[baseline={(current bounding box.center)}]
  \tikzset{pgfornamentstyle/.style={
            draw=Goldenrod,fill=Red,line width=1pt}}
  \node[fill=black,circle,draw=Red,line width=2pt,inner sep=-8pt]
    at (0,0) {\pgfornamenthan[scale=0.38]{56}};
\end{tikzpicture}
\end{tcblisting}


\begin{tcblisting}{title={一个简单的边框范例}}
\begin{tikzpicture}
  \tikzset{every node/.append style={铜绿,inner sep=0pt}}
  \node (nw) {\pgfornamenthan[scale=0.25]{12}};
  \node[right=50bp of nw] (ne) {\pgfornamenthan[scale=0.25,symmetry=v]{12}};
  \node[below=50bp of nw] (sw) {\pgfornamenthan[scale=0.25,symmetry=h]{12}};
  \node[below=50bp of ne] (se) {\pgfornamenthan[scale=0.25,symmetry=c]{12}};

  % 每个部件原宽度为200bp,因此绘画时如果以bp作为单位，会比较容易计算xscale的值。
  % 这里 scale=0.25 则部件有效宽度为50bp，刚好是两个角点符号之间的距离（参照
  % 上面4行代码），因此不需要再设 xscale。
  \node[anchor=north west] at (nw.north east) {\pgfornamenthan[scale=0.25]{32}};
  \node[anchor=south west] at (sw.south east) {\pgfornamenthan[scale=0.25]{32}};
  \node[anchor=south west,rotate=-90] at (nw.south west) {\pgfornamenthan[scale=0.25]{32}};
  \node[anchor=south east,rotate=90] at (ne.south east) {\pgfornamenthan[scale=0.25]{32}};

  \node[anchor=center,靛蓝,shift={(25bp,-25bp)}] at (nw.south east) {\pgfornamenthan[scale=0.5]{56}};
\end{tikzpicture}
\end{tcblisting}



\begin{tcblisting}{title={另一个简单的边框范例}}

\begin{tikzpicture}[x=1pt,y=1pt]
    \tikzset{every node/.append style={inner sep=0pt,color=胭脂}}
    % \tikzset{pgfornamentstyle/.append style={draw=Goldenrod,fill=Red,line width=1pt}}
      \node (nw) {\pgfornamenthan[scale=0.35]{1}};
    \node[anchor=north west,right=100 of nw] (ne) {\pgfornamenthan[symmetry=v,scale=0.35]{1}};
    \node[anchor=north west,below=0pt of nw] (sw) {\pgfornamenthan[symmetry=h,scale=0.35]{1}};
    \node[anchor=north east,below=0pt of ne] (se) {\pgfornamenthan[symmetry=c,scale=0.35]{1}};

    %% 用 pgfornmanet 自带的 \draw (A) to[ornamenthan=19] (B) 机制的话会导致线条高度跟着变化！只好折衷用tikz的 xscale 来实现加长了。\pgfornamenthan 本身的 scale 则要确保和角点的 scale 一致。
    \node[anchor=north west,xscale=1.45] at (nw.north east) {\pgfornamenthan[scale=0.35]{29}};
    \node[anchor=south west,xscale=1.45] at (sw.south east) {\pgfornamenthan[scale=0.35]{29}};

  \node[font=\kaishu,align=center,xshift=50,text=black] at (nw.south east)
     {给我一片海棠红啊海棠红\\血一样的海棠红\\
     沸血的烧痛是乡愁的烧痛\\给我一片海棠红啊海棠红};
\end{tikzpicture}
\end{tcblisting}


\section{纹样列表}

\noindent\raggedright%
\foreach \n in {1,...,32}{%
  \begin{tikzpicture}
    \fill[牙色](-1cm,-1cm) rectangle (1cm,1cm);
    \node[inner sep=0pt] (element) {\pgfornamenthan[color=茜色,width=1.8cm]{\n}};
    \node[inner sep=0pt,font=\footnotesize] at (0.8cm,-0.8cm) {\n};
  \end{tikzpicture}\space
}%
%
\noindent\raggedright%
\foreach \n in {33,...,36}{%
  \begin{tikzpicture}
    \fill[牙色](-1cm,-1.1cm) rectangle (1cm,0.9cm);
    \node[inner sep=0pt] (element) {\pgfornamenthan[color=茜色,height=0.6cm]{\n}};
    \node[inner sep=0pt,font=\footnotesize] at (0.8cm,-0.9cm) {\n};
  \end{tikzpicture}\space
}%
\foreach \n in {37,...,40}{%
  \begin{tikzpicture}
    \fill[牙色](-1cm,-1.1cm) rectangle (1cm,0.9cm);
    \node[inner sep=0pt] (element) {\pgfornamenthan[color=茜色,height=1.1cm]{\n}};
    \node[inner sep=0pt,font=\footnotesize] at (0.8cm,-0.9cm) {\n};
  \end{tikzpicture}\space
}%
\foreach \n in {41,...,48}{%
  \begin{tikzpicture}
    \fill[牙色](-1cm,-1.1cm) rectangle (1cm,0.9cm);
    \node[inner sep=0pt] (element) {\pgfornamenthan[color=茜色,height=0.6cm]{\n}};
    \node[inner sep=0pt,font=\footnotesize] at (0.8cm,-0.9cm) {\n};
  \end{tikzpicture}\space
}%

\noindent\raggedright%
\foreach \n in {49,...,54}{%
  \begin{tikzpicture}
    \fill[牙色](-1.5cm,-1.5cm) rectangle (1.5cm,1.5cm);
    \node[inner sep=0pt] (element) {\pgfornamenthan[color=茜色,width=2.8cm]{\n}};
    \node[inner sep=0pt,font=\footnotesize] at (0,0) {\n};
  \end{tikzpicture}\space
}%
\foreach \n in {55,...,57}{%
  \begin{tikzpicture}
    \fill[牙色](-1cm,-1cm) rectangle (1cm,1cm);
    \node[inner sep=0pt] (element) {\pgfornamenthan[color=茜色,width=1.8cm]{\n}};
    \node[inner sep=0pt,font=\footnotesize] at (0.8cm,-0.8cm) {\n};
  \end{tikzpicture}\space
}%


\end{document}
% \bigskip

\noindent%
\raggedright%
\foreach \n in {1,...,48}{%
% \tikzset{every node/.append style={inner sep=0pt,line width=1}}%
\tikzset{pgfornamentstyle/.append style={draw=藏蓝,fill=枣红,line width=1}}%
\pgfornamenthan[width=2cm]{\n}%
\tikzset{pgfornamentstyle/.append style={line width=1}}%
\pgfornamenthan[width=2cm,symmetry=v,color=水色]{\n}
}%
\foreach \n in {49,...,54}{%
% \tikzset{every node/.append style={inner sep=0pt,line width=1}}%
\tikzset{pgfornamentstyle/.append style={draw=藏蓝,fill=枣红,line width=1}}%
\pgfornamenthan[width=4cm]{\n}%
\tikzset{pgfornamentstyle/.append style={line width=1}}%
\pgfornamenthan[width=4cm,symmetry=v,color=水色]{\n}
}%
\foreach \n in {55,...,57}{%
% \tikzset{every node/.append style={inner sep=0pt,line width=1}}%
\tikzset{pgfornamentstyle/.append style={draw=藏蓝,fill=枣红,line width=1}}%
\pgfornamenthan[width=2cm]{\n}%
\tikzset{pgfornamentstyle/.append style={line width=1}}%
\pgfornamenthan[width=2cm,symmetry=v,color=水色]{\n}
}%


\end{document}
